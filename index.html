<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XML Parser</title>
    <link rel="stylesheet" href="styling.css">
</head>
<body>
    <h1>XML Parser</h1>
    <p>Upload a single XML file or a folder that contains XML files, and this website will parse the XML and return a .txt file containing the information extracted from the XML. Any files not containing XML are skipped. Created for the <a href="https://ngn.artsci.utoronto.ca/HLVC/home.php">HLVC Project</a>.</p>
    <div id="main-box">
        <div id="upload-box">
            <fieldset>
                <legend>Select XML Source</legend>
                <label for="fileoption">Single XML</label>
                <input type="radio" id="fileoption" name="choice" value="fileoption" checked>
                <label for="folderoption">Folder of XMLs</label>
                <input type="radio" id="folderoption" name="choice" value="folderoption">
            </fieldset>
            <!-- <label for="fileoption">Single XML</label>
            <input type="radio" id="fileoption" name="choice" value="fileoption" checked="true">
            <label for="folderoption">Folder of XMLs</label>
            <input type="radio" id="folderoption" name="choice" value="folderoption">  -->
            
            <label id="XMLfile-label" for="XMLfile">Choose an XML file:</label>
            <input type="file" id="XMLfile" name="XMLfile"/>
            
            <label id="XMLfolder-label" for="XMLfolder" style="display: none;">Choose a folder containing XML files:</label>
            <input type="file" id="XMLfolder" name="XMLfolder" style="display: none;" webkitdirectory directory multiple/>
            
            <button id="parse-button" onclick="main()" type="button" disabled>Parse</button>
        </div>
        <div id="download-box"> 
            <button id="download-button" name="download-button" onclick="download()" type="button" disabled>Download .txt file</button>
            <a id="download-link" style="display: none;"></a>
        </div>
    </div>
    <p>If anything seems to be amiss, please let me know <a href="mailto:omar.rawi@hotmail.com">here</a> and I will get right to fixing it.</p>
</body>
<script>
    const fileOption = document.getElementById('fileoption');
    const folderOption = document.getElementById('folderoption');
    const XMLFileInput = document.getElementById('XMLfile');
    const XMLFolderInput = document.getElementById('XMLfolder');
    const XMLFileLabel = document.getElementById('XMLfile-label');
    const XMLFolderLabel = document.getElementById('XMLfolder-label');
    
    // Start the event listener for when either radio button changes
    fileOption.addEventListener('change', function() {
        XMLFolderLabel.style.display = 'none';
        XMLFolderInput.style.display = 'none';
        XMLFileInput.style.display = 'block';
        XMLFileLabel.style.display = 'block';

        reset();
    });

    folderOption.addEventListener('change', function() {
        XMLFileLabel.style.display = 'none';
        XMLFileInput.style.display = 'none';
        XMLFolderInput.style.display = 'block';
        XMLFolderLabel.style.display = 'block';

        reset();
    });

    XMLFileInput.addEventListener('change', function() {
        if (XMLFileInput.files.length > 0) {
            document.getElementById('parse-button').disabled = false;
        } else {
            document.getElementById('parse-button').disabled = true;
        }
        document.getElementById('download-button').disabled = true;
    });

    XMLFolderInput.addEventListener('change', function() {
        if (XMLFolderInput.files.length > 0) {
            document.getElementById('parse-button').disabled = false;
        } else {
            document.getElementById('parse-button').disabled = true;
        }
        document.getElementById('download-button').disabled = true;
    });

    function reset() {
        document.getElementById('parse-button').disabled = true;
        document.getElementById('download-button').disabled = true;
        XMLFileInput.value = "";
        XMLFolderInput.value = "";
    }
</script>
<script src="xmlparser.js"></script>
</html>